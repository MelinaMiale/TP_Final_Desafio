{{> editorHeader }}
<div class="editor-container">

    <header class="editor-header">
        <p class="editor-subtitle">Editor · {{currentDate}}</p>
        <div class="editor-title-box">
            Bienvenido, {{editorName}}
        </div>
    </header>

    <section class="editor-kpis">
        <div class="kpi">
            <span class="kpi-label">Reportes pendientes</span>
            <span class="kpi-value">{{pendingReports}}</span>
        </div>
        <div class="kpi">
            <span class="kpi-label">Reportes resueltos</span>
            <span class="kpi-value">{{resolvedReports}}</span>
        </div>
        <div class="kpi">
            <span class="kpi-label">Tiempo promedio de resolución</span>
            <span class="kpi-value">{{avgResolutionTime}} días</span>
        </div>
    </section>

    <section class="editor-panel">
        <h2 class="panel-title">Reportes pendientes</h2>
        <table class="editor-table">
            <thead>
            <tr>
                <th>Pregunta</th>
                <th>Usuario</th>
                <th>Comentario Usuario</th>
                <th>Fecha Reporte</th>
                <th>Estado Origen</th>
                <th>Acción</th>
            </tr>
            </thead>
            <tbody>
            {{#pendingReportsList}}
                <tr>
                    <td>{{preguntaEnunciado}}</td>
                    <td>{{usuarioNombre}}</td>
                    <td>{{comentario_usuario}}</td>
                    <td>{{fecha_reporte}}</td>
                    <td>{{estado_origen}}</td>
                    <td>
                        <form action="/editor/resolvePlayerReport" method="POST">
                            <input type="hidden" name="reportId" value="{{reportId}}">
                            <select name="action" required>
                                <option value="">Seleccionar...</option>
                                <option value="aprobar">Aprobar</option>
                                <option value="rechazar">Rechazar</option>
                            </select>
                            <button type="submit" class="btn-editor">Resolver</button>
                        </form>
                    </td>
                </tr>
            {{/pendingReportsList}}
            {{^pendingReportsList}}
                <tr><td colspan="6" class="empty-state">No hay reportes pendientes.</td></tr>
            {{/pendingReportsList}}
            </tbody>
        </table>
    </section>

    <section class="editor-panel">
        <h2 class="panel-title">Historial de reportes moderados</h2>
        <table class="editor-table">
            <thead>
            <tr>
                <th>Pregunta</th>
                <th>Usuario</th>
                <th>Comentario Usuario</th>
                <th>Acción Editor</th>
                <th>Comentario Editor</th>
                <th>Estado Origen → Destino</th>
                <th>Fechas</th>
            </tr>
            </thead>
            <tbody>
            {{#history}}
                <tr>
                    <td>{{preguntaEnunciado}}</td>
                    <td>{{usuarioNombre}}</td>
                    <td>{{comentario_usuario}}</td>
                    <td>{{accion}}</td>
                    <td>{{comentario_editor}}</td>
                    <td>{{estado_origen}} → {{estado_destino}}</td>
                    <td>{{fecha_reporte}} / {{fecha_revision}}</td>
                </tr>
            {{/history}}
            {{^history}}
                <tr><td colspan="7" class="empty-state">Sin acciones recientes.</td></tr>
            {{/history}}
            </tbody>
        </table>
    </section>

</div>
{{> footer }}