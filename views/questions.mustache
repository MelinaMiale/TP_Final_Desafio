{{> editorHeader }}
<div class="editor-container">
    <div class="editor-header">
        <div class="editor-title-box">Gestion de Preguntas</div>
    </div>

    <!-- KPIs -->
    <div class="editor-kpis">
        <div class="kpi">
            <span class="kpi-label">Totales</span>
            <span class="kpi-value">{{totalQuestions}}</span>
        </div>
        <div class="kpi">
            <span class="kpi-label">Aprobadas</span>
            <span class="kpi-value">{{approvedCount}}</span>
        </div>
        <div class="kpi">
            <span class="kpi-label">Pendientes</span>
            <span class="kpi-value">{{pendingCount}}</span>
        </div>
    </div>

    <!-- Add Question Form -->
    <div class="editor-panel">
        <div class="panel-title">Nueva Pregunta</div>
        <form method="post" action="?controller=editor&method=addQuestion">
            <label>Enunciado</label>
            <input type="text" name="statement" required>

            <label>Opción A</label>
            <input type="text" name="optionA" required>

            <label>Opción B</label>
            <input type="text" name="optionB" required>

            <label>Opción C</label>
            <input type="text" name="optionC" required>

            <label>Opción D</label>
            <input type="text" name="optionD" required>

            <label>Respuesta Correcta</label>
            <select name="correctAnswer" required>
                <option value="A">A</option>
                <option value="B">B</option>
                <option value="C">C</option>
                <option value="D">D</option>
            </select>

            <label>Categoría</label>
            <select name="categoryId" required>
                {{#categories}}
                    <option value="{{id}}">{{nombre}}</option>
                {{/categories}}
            </select>

            <button type="submit" class="btn-editor">Guardar</button>
        </form>
    </div>

    <!-- Questions Table -->
    <div class="editor-panel">
        <div class="panel-title">Preguntas</div>
        {{#questions.length}}
            <table class="editor-table">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Statement</th>
                    <th>Category</th>
                    <th>Correct Answer</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                {{#questions}}
                    <tr>
                        <td>{{id}}</td>
                        <td>{{enunciado}}</td>
                        <td>{{categoria}}</td>
                        <td>{{respuesta_correcta}}</td>
                        <td>{{estado}}</td>
                        <td>
                            <form method="post" action="?controller=editor&method=editQuestion" style="display:inline;">
                                <input type="hidden" name="id" value="{{id}}">
                                <button type="submit" class="btn-editor">Edit</button>
                            </form>
                            <form method="post" action="?controller=editor&method=deleteQuestion" style="display:inline;">
                                <input type="hidden" name="id" value="{{id}}">
                                <button type="submit" class="btn-editor">Delete</button>
                            </form>
                        </td>
                    </tr>
                {{/questions}}
                </tbody>
            </table>
        {{/questions.length}}
        {{^questions.length}}
            <div class="empty-state">No hay preguntas disponibles</div>
        {{/questions.length}}
    </div>
</div>
{{> footer }}